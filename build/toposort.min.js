!function(e,r){"function"==typeof define&&define.amd?define("Toposort",["exports","module"],r):"undefined"!=typeof exports&&"undefined"!=typeof module?r(0,module):(r(r={exports:{}},r),e.Toposort=r.exports)}(this,function(e,r){"use strict";var t=(n.prototype.add=function(e,r){if("string"!=typeof e||!e)throw new TypeError("Dependent name must be given as a not empty string");if(0<(r=Array.isArray(r)?r:[r]).length)for(var t,n=r,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){if(i){if(o>=n.length)break;t=n[o++]}else{if((o=n.next()).done)break;t=o.value}var a=t;if("string"!=typeof a||!a)throw new TypeError("Dependency name must be given as a not empty string");this.edges.push([e,a])}else this.edges.push([e]);return this},n.prototype.sort=function(){for(var e,l=this,y=[],r=this.edges,t=Array.isArray(r),n=0,r=t?r:r[Symbol.iterator]();;){if(t){if(n>=r.length)break;e=r[n++]}else{if((n=r.next()).done)break;e=n.value}for(var i,o=g=e,a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){if(a){if(s>=o.length)break;i=o[s++]}else{if((s=o.next()).done)break;i=s.value}var f=i;-1===y.indexOf(f)&&y.push(f)}}for(var p=y.length,h=new Array(y.length),d=function e(r,t){if(0!==t.length&&-1!==t.indexOf(r))throw new Error("Cyclic dependency found. "+r+" is dependent of itself.\nDependency chain: "+t.join(" -> ")+" => "+r);var n=y.indexOf(r);if(-1!==n){var i=!1;y[n]=!1;for(var o,a=l.edges,s=Array.isArray(a),f=0,a=s?a:a[Symbol.iterator]();;){if(s){if(f>=a.length)break;o=a[f++]}else{if((f=a.next()).done)break;o=f.value}var d=o;d[0]===r&&(i=i||t.concat([r]),e(d[1],i))}h[--p]=r}},u=0;u<y.length;u++){if(!1!==(f=y[u])){y[u]=!1;for(var c,g,v=this.edges,b=Array.isArray(v),m=0,v=b?v:v[Symbol.iterator]();;){if(b){if(m>=v.length)break;c=v[m++]}else{if((m=v.next()).done)break;c=m.value}(g=c)[0]===f&&d(g[1],[f])}h[--p]=f}}return h},n.prototype.clear=function(){return this.edges=[],this},n);function n(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,n),this.edges=[],this.Toposort=n}r.exports=t});